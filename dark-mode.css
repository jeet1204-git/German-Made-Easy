/*
 * Dark Mode — German Made Easy
 * Gamified "new world" dark theme
 * Activates automatically based on the user's OS/browser preference
 * (prefers-color-scheme: dark)
 *
 * Design language: deep space / adventure RPG
 *   --dm-bg          #05050f  deep-space black
 *   --dm-surface     #110d22  dark purple surface
 *   --dm-surface-2   #1c1638  mid-depth surface
 *   --dm-border      rgba(110, 80, 220, 0.35)  neon-purple border
 *   --dm-text        #ece6ff  crisp lavender-white
 *   --dm-muted       #8878aa  muted purple text
 *   --dm-orange      #FF6B35  primary accent (kept from light mode)
 *   --dm-cyan        #38bdf8  electric cyan accent
 *   --dm-glow-orange rgba(255, 107, 53, 0.25)
 *   --dm-glow-purple rgba(110, 80, 220, 0.20)
 */

@media (prefers-color-scheme: dark) {

  /* ================================================
     CSS Variable Overrides
     ================================================ */
  :root {
    --dark: #ece6ff !important;
    --light: #05050f !important;
    --white: #110d22 !important;
    --border: #3d2d6e;

    /* ai-partner.html design tokens */
    --ink: #ece6ff;
    --parchment: #05050f;
    --cream: #1c1638;
    --muted: #8878aa;
    --shadow: rgba(0, 0, 0, 0.7);
    --gold-pale: #1e1620;

    /* Soften gold/yellow tokens for dark mode */
    --gold: #a07830;
    --gold-light: #c49050;
    --accent: #FF6B35;
  }


  /* ================================================
     BODY & PAGE BACKGROUND
     ================================================ */
  body {
    background: #05050f !important;
    background-image:
      radial-gradient(ellipse 80% 50% at 20% 10%, rgba(80, 40, 180, 0.12) 0%, transparent 60%),
      radial-gradient(ellipse 60% 40% at 80% 80%, rgba(255, 107, 53, 0.07) 0%, transparent 55%) !important;
    background-attachment: fixed !important;
    color: #ece6ff !important;
  }


  /* ================================================
     NAVIGATION
     ================================================ */
  nav {
    background: rgba(8, 5, 20, 0.97) !important;
    border-bottom: 1px solid rgba(110, 80, 220, 0.25) !important;
    box-shadow: 0 2px 24px rgba(80, 40, 180, 0.18) !important;
  }

  .nav-links a {
    color: #c8bef0 !important;
  }

  .nav-links a:hover {
    color: #FF6B35 !important;
  }

  .user-email {
    color: #c8bef0 !important;
  }

  /* ai-partner topbar */
  .topbar {
    background: rgba(5, 5, 15, 0.97) !important;
    border-bottom: 1px solid rgba(110, 80, 220, 0.25) !important;
  }


  /* ================================================
     MAIN CARDS & CONTAINERS
     ================================================ */
  .login-container,
  .signup-container,
  .payment-container,
  .card,
  .leaderboard-card,
  .course-card,
  .empty-state,
  .tab-switcher,
  .reconnecting-card,
  .sprechen-card-active,
  .section-box,
  .price-card,
  .chapter,
  .chapter-content,
  .setup-card,
  .conversation-box,
  .method-card {
    background: #110d22 !important;
    color: #ece6ff !important;
    border-color: rgba(110, 80, 220, 0.35) !important;
    box-shadow: 0 4px 32px rgba(80, 40, 180, 0.15), 0 1px 0 rgba(120, 90, 255, 0.08) inset !important;
  }

  .course-card:hover {
    box-shadow: 0 8px 40px rgba(80, 40, 180, 0.28), 0 0 0 1px rgba(110, 80, 220, 0.5) !important;
  }

  /* Document pages */
  .container {
    background: #110d22 !important;
    color: #ece6ff !important;
  }

  /* ai-partner access-denied overlay */
  #access-denied {
    background: #05050f !important;
  }


  /* ================================================
     INNER SURFACES
     ================================================ */
  .stat-box,
  .course-details,
  .partner-info,
  .evaluation-form,
  .feedback-section,
  .course-stat,
  .task-questions,
  .criteria-item,
  .chapter-header,
  .method-tag {
    background: #1c1638 !important;
    color: #ece6ff !important;
  }

  .chapter-header:hover,
  .chapter.expanded .chapter-header {
    background: #251e48 !important;
    box-shadow: inset 3px 0 0 #FF6B35 !important;
  }


  /* ================================================
     TEXT COLOURS
     ================================================ */
  h1, h2, h3, h4, h5, h6 {
    color: #ece6ff !important;
    text-shadow: 0 0 20px rgba(140, 100, 255, 0.2) !important;
  }

  p {
    color: #c0b4d8 !important;
  }

  label {
    color: #d8d0f0 !important;
  }

  /* Secondary / muted text */
  .course-description,
  .sprechen-description,
  .leaderboard-note,
  .leaderboard-empty-text,
  .footer-note,
  .page-subtitle,
  .timer-label,
  .level-switcher-label,
  .lb-motivational-badge,
  .lb-streak,
  .stat-label,
  .scenario-gujarati,
  .waiting-subtext,
  .content-summary,
  .chapter-meta,
  .lesson-duration,
  .price-note,
  .method-desc,
  .signup-link,
  .back-home,
  .back-link {
    color: #8878aa !important;
  }

  /* Primary text elements */
  .lb-name,
  .lb-stat,
  .lb-rank,
  .course-title,
  .feature-text strong,
  .waiting-text,
  .match-text,
  .results-title,
  .criteria-label,
  .welcome-header h1,
  .section-heading,
  .chapter-title,
  .lesson-title,
  .page-title,
  .course-name,
  .stat-number {
    color: #ece6ff !important;
  }

  .lesson-title.locked {
    color: #5a4e78 !important;
  }

  /* Links */
  .back-home a,
  .back-link a {
    color: #38bdf8 !important;
  }

  .signup-link a,
  .login-link a {
    color: #FF6B35 !important;
    text-shadow: 0 0 10px rgba(255, 107, 53, 0.4) !important;
  }


  /* ================================================
     FORM INPUTS
     ================================================ */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="tel"],
  input[type="number"],
  textarea,
  select,
  .scenario-select {
    background: #1c1638 !important;
    color: #ece6ff !important;
    border-color: rgba(110, 80, 220, 0.4) !important;
  }

  input::placeholder,
  textarea::placeholder {
    color: #5a4e78 !important;
  }

  input:focus,
  textarea:focus,
  select:focus,
  .scenario-select:focus {
    border-color: #FF6B35 !important;
    box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.2), 0 0 12px rgba(255, 107, 53, 0.1) !important;
  }


  /* ================================================
     SPECIAL BUTTONS
     ================================================ */
  .btn-google {
    background: #1c1638 !important;
    color: #ece6ff !important;
    border-color: rgba(110, 80, 220, 0.4) !important;
  }

  .btn-nav-link,
  .btn-leaderboard {
    background: transparent !important;
    border-color: #FF6B35 !important;
    color: #FF6B35 !important;
    box-shadow: 0 0 10px rgba(255, 107, 53, 0.15) !important;
  }

  .btn-nav-link:hover,
  .btn-leaderboard:hover {
    background: #FF6B35 !important;
    color: #fff !important;
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.4) !important;
  }

  .btn-secondary {
    background: transparent !important;
    color: #FF6B35 !important;
    border-color: #FF6B35 !important;
    box-shadow: 0 0 10px rgba(255, 107, 53, 0.15) !important;
  }

  .btn-secondary:hover {
    background: rgba(255, 107, 53, 0.18) !important;
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.3) !important;
  }

  /* rating buttons (sprechen-buddy) */
  .rating-btn {
    background: #1c1638 !important;
    border-color: rgba(110, 80, 220, 0.4) !important;
    color: #ece6ff !important;
  }

  .rating-btn:hover {
    border-color: #FF6B35 !important;
    background: rgba(255, 107, 53, 0.15) !important;
    box-shadow: 0 0 14px rgba(255, 107, 53, 0.25) !important;
  }

  /* level-tab (ai-partner) inactive */
  .level-tab:not(.active),
  .mode-tab:not(.active) {
    background: #1c1638 !important;
    color: #8878aa !important;
    border-color: rgba(110, 80, 220, 0.35) !important;
  }

  /* level-tab active — add glow */
  .level-tab.active,
  .mode-tab.active {
    box-shadow: 0 0 14px rgba(255, 107, 53, 0.35) !important;
  }

  /* level-btn (leaderboard) inactive */
  .level-btn:not(.active) {
    background: #110d22 !important;
    border-color: rgba(110, 80, 220, 0.35) !important;
    color: #8878aa !important;
  }

  /* tab-btn (leaderboard) inactive */
  .tab-btn:not(.active) {
    color: #8878aa !important;
  }

  /* tab-btn active — glow */
  .tab-btn.active {
    box-shadow: 0 0 14px rgba(255, 107, 53, 0.3) !important;
  }

  /* method-card (payment) */
  .method-card {
    border-color: rgba(110, 80, 220, 0.35) !important;
  }

  .method-card.selected {
    background: rgba(255, 107, 53, 0.1) !important;
    border-color: #FF6B35 !important;
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.25) !important;
  }


  /* ================================================
     DIVIDERS & BORDERS
     ================================================ */
  .divider::before,
  .divider::after,
  .or-divider-line {
    background: rgba(110, 80, 220, 0.25) !important;
  }

  .divider {
    color: #5a4e78 !important;
  }

  .or-divider-text {
    background: #110d22 !important;
    color: #5a4e78 !important;
  }

  .info-row {
    border-bottom-color: rgba(110, 80, 220, 0.2) !important;
  }

  .lesson {
    border-bottom-color: rgba(110, 80, 220, 0.15) !important;
  }

  .price-section {
    border-bottom-color: rgba(110, 80, 220, 0.2) !important;
  }


  /* ================================================
     PROGRESS BAR TRACK
     ================================================ */
  .progress-bar {
    background: rgba(110, 80, 220, 0.2) !important;
  }


  /* ================================================
     LOADING SPINNER
     ================================================ */
  .loading-spinner,
  .spinner {
    border-color: rgba(110, 80, 220, 0.25) !important;
    border-top-color: #FF6B35 !important;
    filter: drop-shadow(0 0 6px rgba(255, 107, 53, 0.5)) !important;
  }


  /* ================================================
     LEADERBOARD ROWS
     ================================================ */
  .leaderboard-row:nth-child(odd) {
    background: rgba(28, 22, 56, 0.6) !important;
  }

  .leaderboard-row.current-user {
    background: rgba(255, 107, 53, 0.12) !important;
    border-color: #FF6B35 !important;
    box-shadow: inset 0 0 20px rgba(255, 107, 53, 0.08) !important;
  }


  /* ================================================
     CHIPS & BADGES
     ================================================ */
  .stat-chip {
    background: rgba(255, 107, 53, 0.14) !important;
    border-color: rgba(255, 107, 53, 0.35) !important;
    box-shadow: 0 0 8px rgba(255, 107, 53, 0.1) !important;
  }


  /* ================================================
     ALERT BOXES
     ================================================ */
  .alert-error {
    background: rgba(42, 10, 10, 0.9) !important;
    color: #ff9090 !important;
    border-color: rgba(180, 40, 40, 0.6) !important;
    box-shadow: 0 0 16px rgba(180, 40, 40, 0.15) !important;
  }

  .alert-success {
    background: rgba(10, 30, 10, 0.9) !important;
    color: #7de8a0 !important;
    border-color: rgba(40, 150, 80, 0.5) !important;
    box-shadow: 0 0 16px rgba(40, 150, 80, 0.12) !important;
  }


  /* ================================================
     SPRECHEN-BUDDY SPECIFIC
     ================================================ */
  .queue-info {
    background: rgba(255, 107, 53, 0.1) !important;
    border-color: #FF6B35 !important;
    box-shadow: 0 0 16px rgba(255, 107, 53, 0.12) !important;
  }

  .task-card {
    background: rgba(255, 107, 53, 0.07) !important;
    border-color: rgba(255, 107, 53, 0.4) !important;
  }

  .points-earned {
    background: rgba(255, 107, 53, 0.1) !important;
    border-color: #FF6B35 !important;
    box-shadow: 0 0 20px rgba(255, 107, 53, 0.2) !important;
  }

  .video-container {
    background: #020208 !important;
  }


  /* ================================================
     AI PARTNER SPECIFIC
     ================================================ */
  .msg.ai .msg-bubble {
    background: #1c1638 !important;
    color: #ece6ff !important;
    border: 1px solid rgba(110, 80, 220, 0.3) !important;
  }

  .msg.user .msg-bubble {
    background: rgba(0, 120, 80, 0.2) !important;
    color: #ece6ff !important;
    border: 1px solid rgba(0, 180, 100, 0.3) !important;
  }

  .processing-status {
    background: rgba(20, 20, 60, 0.8) !important;
    border-color: rgba(56, 189, 248, 0.4) !important;
    color: #38bdf8 !important;
    box-shadow: 0 0 14px rgba(56, 189, 248, 0.1) !important;
  }

  .recording-status {
    background: rgba(40, 10, 20, 0.8) !important;
    border-color: rgba(200, 50, 80, 0.5) !important;
    color: #ff8090 !important;
    box-shadow: 0 0 14px rgba(200, 50, 80, 0.12) !important;
  }


  /* ================================================
     COURSE PAGE (A1/A2) SPECIFIC
     ================================================ */

  /* Slider cards */
  .slider-card {
    background: #110d22 !important;
    border-color: rgba(110, 80, 220, 0.35) !important;
    box-shadow: 0 4px 24px rgba(80, 40, 180, 0.15) !important;
  }

  .slider-card-body p {
    color: #8878aa !important;
  }

  /* Slider arrow button */
  .slider-arrow {
    background: #1c1638 !important;
    border-color: rgba(110, 80, 220, 0.4) !important;
    color: #ece6ff !important;
  }

  .slider-arrow:hover {
    border-color: #FF6B35 !important;
    box-shadow: 0 0 14px rgba(255, 107, 53, 0.25) !important;
  }

  /* Disabled slider card btn */
  .slider-card-btn.disabled {
    background: rgba(110, 80, 220, 0.12) !important;
    color: #5a4e78 !important;
  }

  /* Gift modal */
  .gift-modal-content,
  .nav-confirmation-modal {
    background: #110d22 !important;
    color: #ece6ff !important;
    border: 1px solid rgba(110, 80, 220, 0.4) !important;
    box-shadow: 0 8px 40px rgba(80, 40, 180, 0.3) !important;
  }

  .gift-modal-close:hover {
    background: rgba(110, 80, 220, 0.2) !important;
  }


  /* ================================================
     PAYMENT PAGE SPECIFIC
     ================================================ */
  .payment-method {
    background: #1c1638 !important;
    color: #8878aa !important;
  }

  .gift-banner {
    background: rgba(255, 107, 53, 0.1) !important;
    border-color: #FF6B35 !important;
    box-shadow: 0 0 16px rgba(255, 107, 53, 0.1) !important;
  }

  .gift-recipient-details {
    background: rgba(16, 185, 129, 0.08) !important;
    border-color: rgba(16, 185, 129, 0.4) !important;
    box-shadow: 0 0 16px rgba(16, 185, 129, 0.08) !important;
  }

  .gift-recipient-details h4 {
    color: #6ee7b7 !important;
  }

  .gift-recipient-row {
    color: #a0e0c0 !important;
  }


  /* ================================================
     INDEX PAGE SPECIFIC
     ================================================ */

  /* Full-width section backgrounds */
  .features,
  .testimonials {
    background: #08051a !important;
  }

  /* Contact & Modal */
  .contact-container,
  .modal-content {
    background: #110d22 !important;
    color: #ece6ff !important;
    border: 1px solid rgba(110, 80, 220, 0.35) !important;
  }

  /* Mobile menu */
  .mobile-menu-overlay {
    background: #08051a !important;
  }

  /* Testimonial / FAQ / feature cards */
  .faq-item,
  .testimonial-card,
  .feature-card,
  .instructor-card,
  .step-card {
    background: #110d22 !important;
    border-color: rgba(110, 80, 220, 0.3) !important;
    box-shadow: 0 4px 24px rgba(80, 40, 180, 0.12) !important;
  }

  .faq-item:hover,
  .testimonial-card:hover,
  .feature-card:hover {
    border-color: rgba(110, 80, 220, 0.55) !important;
    box-shadow: 0 6px 32px rgba(80, 40, 180, 0.22) !important;
  }

  .faq-answer {
    background: #1c1638 !important;
  }

  /* FAQ question button */
  .faq-question {
    background: #110d22 !important;
    color: #ece6ff !important;
  }

  /* Pricing cards */
  .pricing-card {
    background: #110d22 !important;
    border-color: rgba(110, 80, 220, 0.35) !important;
    box-shadow: 0 4px 32px rgba(80, 40, 180, 0.15) !important;
  }

  /* Footer */
  footer {
    background: #020208 !important;
    border-top: 1px solid rgba(110, 80, 220, 0.2) !important;
  }

  /* Section backgrounds */
  .section-white,
  .bg-white {
    background: #110d22 !important;
  }


  /* ================================================
     YELLOW / GOLD OVERRIDES (eye-friendly in dark mode)
     ================================================ */

  /* AI banner heading: replace blinding yellow with soft orange */
  .ai-banner-text h4 {
    color: #FF6B35 !important;
  }

  /* AI partner button: replace yellow background with orange */
  .btn-ai-partner {
    background: #FF6B35 !important;
    color: #fff !important;
    box-shadow: 0 4px 14px rgba(255, 107, 53, 0.35) !important;
  }

  .btn-ai-partner:hover {
    background: rgba(255, 107, 53, 0.85) !important;
    color: #fff !important;
  }

  /* AI banner icon tint: replace yellow tint with orange tint */
  .ai-banner-icon {
    background: rgba(255, 107, 53, 0.15) !important;
  }

  /* Floating AI FAB button: remove yellow from gradient */
  .ai-fab {
    background: linear-gradient(135deg, #FF6B35, #cc4a1f) !important;
    color: #fff !important;
  }

  .ai-fab:hover {
    color: #fff !important;
  }

  /* Leaderboard gold rank: soften yellow to muted amber */
  .lb-rank.gold {
    color: #c49050 !important;
  }

}
